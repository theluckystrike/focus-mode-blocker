<!DOCTYPE html>
<html lang="en" data-theme="system">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Focus Mode - Settings</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <main class="options-container" role="main">
    <header class="options-header">
      <div class="header-icon" aria-hidden="true">
        <svg viewBox="0 0 128 128" width="40" height="40">
          <defs>
            <linearGradient id="hShieldGrad" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0%" stop-color="#6366f1" />
              <stop offset="100%" stop-color="#06b6d4" />
            </linearGradient>
          </defs>
          <path d="M64 8C64 8,20 22,20 22L20 58C20 88,40 108,64 120C88 108,108 88,108 58L108 22C108 22,64 8,64 8Z" fill="url(#hShieldGrad)" />
          <circle cx="64" cy="62" r="26" fill="none" stroke="white" stroke-width="3.5" opacity="0.9" />
          <circle cx="64" cy="62" r="13" fill="none" stroke="white" stroke-width="3" opacity="0.9" />
          <circle cx="64" cy="62" r="4" fill="white" opacity="0.95" />
          <line x1="64" y1="30" x2="64" y2="46" stroke="white" stroke-width="3" stroke-linecap="round" opacity="0.9" />
          <line x1="64" y1="78" x2="64" y2="94" stroke="white" stroke-width="3" stroke-linecap="round" opacity="0.9" />
          <line x1="32" y1="62" x2="48" y2="62" stroke="white" stroke-width="3" stroke-linecap="round" opacity="0.9" />
          <line x1="80" y1="62" x2="96" y2="62" stroke="white" stroke-width="3" stroke-linecap="round" opacity="0.9" />
        </svg>
      </div>
      <h1 data-i18n="optionsHeading">Focus Mode Settings</h1>
    </header>

    <!-- ===== General Settings ===== -->
    <section class="card" aria-labelledby="general-heading">
      <h2 id="general-heading" data-i18n="headingGeneral">General</h2>

      <fieldset class="setting-group">
        <legend data-i18n="legendTheme">Theme</legend>
        <div class="radio-group" role="radiogroup" aria-label="Theme selection">
          <label class="radio-label">
            <input type="radio" name="theme" value="light">
            <span class="radio-custom"></span>
            Light
          </label>
          <label class="radio-label">
            <input type="radio" name="theme" value="dark">
            <span class="radio-custom"></span>
            Dark
          </label>
          <label class="radio-label">
            <input type="radio" name="theme" value="system">
            <span class="radio-custom"></span>
            System
          </label>
        </div>
      </fieldset>

      <div class="setting-row">
        <div class="setting-info">
          <label for="soundToggle" data-i18n="labelAmbientSound">Ambient sound during sessions</label>
          <span class="setting-desc" data-i18n="descAmbientSound">Play calming audio while focusing</span>
        </div>
        <label class="toggle" aria-label="Toggle ambient sound">
          <input type="checkbox" id="soundToggle">
          <span class="toggle-slider"></span>
        </label>
      </div>

      <div class="setting-row sub-setting" id="soundOptions" hidden>
        <div class="setting-info">
          <label for="soundSelector" data-i18n="labelSoundType">Sound type</label>
        </div>
        <select id="soundSelector" aria-label="Select ambient sound type">
          <option value="rain">Rain</option>
          <option value="whitenoise">White Noise</option>
          <option value="lofi">Lo-fi</option>
        </select>
      </div>

      <div class="setting-row sub-setting" id="volumeRow" hidden>
        <div class="setting-info">
          <label for="volumeSlider" data-i18n="labelVolume">Volume</label>
          <span class="setting-desc" id="volumeValue">70%</span>
        </div>
        <input type="range" id="volumeSlider" min="0" max="100" value="70" aria-label="Volume level" aria-valuemin="0" aria-valuemax="100">
      </div>

      <div class="setting-row">
        <div class="setting-info">
          <label for="mutingToggle" data-i18n="labelMuteNotifications">Mute notifications during sessions</label>
          <span class="setting-desc" data-i18n="descMuteNotifications">Suppress browser notifications while focusing</span>
        </div>
        <label class="toggle" aria-label="Toggle notification muting">
          <input type="checkbox" id="mutingToggle">
          <span class="toggle-slider"></span>
        </label>
      </div>
    </section>

    <!-- ===== Blocking Schedule ===== -->
    <section class="card" aria-labelledby="schedule-heading">
      <h2 id="schedule-heading" data-i18n="headingSchedule">Blocking Schedule</h2>

      <div class="setting-row">
        <div class="setting-info">
          <label for="scheduleToggle" data-i18n="labelEnableSchedule">Enable scheduled blocking</label>
          <span class="setting-desc" data-i18n="descEnableSchedule">Automatically block sites on a recurring schedule</span>
        </div>
        <label class="toggle" aria-label="Toggle blocking schedule">
          <input type="checkbox" id="scheduleToggle">
          <span class="toggle-slider"></span>
        </label>
      </div>

      <div id="scheduleOptions" hidden>
        <fieldset class="setting-group">
          <legend data-i18n="legendActiveDays">Active days</legend>
          <div class="days-group" role="group" aria-label="Select active days">
            <label class="day-checkbox">
              <input type="checkbox" name="scheduleDay" value="1">
              <span class="day-chip">Mon</span>
            </label>
            <label class="day-checkbox">
              <input type="checkbox" name="scheduleDay" value="2">
              <span class="day-chip">Tue</span>
            </label>
            <label class="day-checkbox">
              <input type="checkbox" name="scheduleDay" value="3">
              <span class="day-chip">Wed</span>
            </label>
            <label class="day-checkbox">
              <input type="checkbox" name="scheduleDay" value="4">
              <span class="day-chip">Thu</span>
            </label>
            <label class="day-checkbox">
              <input type="checkbox" name="scheduleDay" value="5">
              <span class="day-chip">Fri</span>
            </label>
            <label class="day-checkbox">
              <input type="checkbox" name="scheduleDay" value="6">
              <span class="day-chip">Sat</span>
            </label>
            <label class="day-checkbox">
              <input type="checkbox" name="scheduleDay" value="0">
              <span class="day-chip">Sun</span>
            </label>
          </div>
        </fieldset>

        <div class="time-row">
          <div class="time-field">
            <label for="startTime" data-i18n="labelStartTime">Start time</label>
            <input type="time" id="startTime" value="09:00">
          </div>
          <span class="time-separator" aria-hidden="true">to</span>
          <div class="time-field">
            <label for="endTime" data-i18n="labelEndTime">End time</label>
            <input type="time" id="endTime" value="17:00">
          </div>
        </div>

        <p class="pro-note">
          <span class="pro-badge" aria-label="Free tier limitation">Free</span>
          1 schedule included. <a href="#" id="upgradeScheduleLink" class="pro-link">Upgrade to Pro</a> for unlimited schedules.
        </p>
      </div>
    </section>

    <!-- ===== Nuclear Mode ===== -->
    <section class="card" aria-labelledby="nuclear-heading">
      <h2 id="nuclear-heading" data-i18n="headingNuclear">Nuclear Mode</h2>
      <p class="section-desc" id="nuclear-desc">
        Lock your blocklist for a set duration. Once activated, blocking <strong>cannot be turned off</strong> until the timer expires. No exceptions.
      </p>

      <fieldset class="setting-group">
        <legend data-i18n="legendNuclearDuration">Duration</legend>
        <div class="duration-grid" role="radiogroup" aria-label="Nuclear mode duration">
          <label class="duration-option">
            <input type="radio" name="nuclearDuration" value="15">
            <span class="duration-chip">15 min</span>
          </label>
          <label class="duration-option">
            <input type="radio" name="nuclearDuration" value="30" checked>
            <span class="duration-chip">30 min</span>
          </label>
          <label class="duration-option">
            <input type="radio" name="nuclearDuration" value="45">
            <span class="duration-chip">45 min</span>
          </label>
          <label class="duration-option">
            <input type="radio" name="nuclearDuration" value="60">
            <span class="duration-chip">1 hr</span>
          </label>
          <label class="duration-option locked" aria-disabled="true">
            <input type="radio" name="nuclearDuration" value="120" disabled>
            <span class="duration-chip">2 hr <span class="lock-icon" aria-label="Pro only">Pro</span></span>
          </label>
          <label class="duration-option locked" aria-disabled="true">
            <input type="radio" name="nuclearDuration" value="240" disabled>
            <span class="duration-chip">4 hr <span class="lock-icon" aria-label="Pro only">Pro</span></span>
          </label>
          <label class="duration-option locked" aria-disabled="true">
            <input type="radio" name="nuclearDuration" value="480" disabled>
            <span class="duration-chip">8 hr <span class="lock-icon" aria-label="Pro only">Pro</span></span>
          </label>
          <label class="duration-option locked" aria-disabled="true">
            <input type="radio" name="nuclearDuration" value="1440" disabled>
            <span class="duration-chip">24 hr <span class="lock-icon" aria-label="Pro only">Pro</span></span>
          </label>
        </div>
      </fieldset>

      <div class="nuclear-status" id="nuclearStatus" hidden>
        <div class="nuclear-active-badge" data-i18n="nuclearActive">NUCLEAR MODE ACTIVE</div>
        <p id="nuclearTimeRemaining"></p>
      </div>

      <button type="button" class="btn btn-danger" id="nuclearActivateBtn" data-i18n="activateNuclearMode" aria-describedby="nuclear-desc">
        Activate Nuclear Mode
      </button>
    </section>

    <!-- ===== About ===== -->
    <section class="card" aria-labelledby="about-heading">
      <h2 id="about-heading" data-i18n="headingAbout">About</h2>

      <div class="about-info">
        <div class="about-row">
          <span class="about-label" data-i18n="aboutExtension">Extension</span>
          <span class="about-value">Focus Mode - Blocker</span>
        </div>
        <div class="about-row">
          <span class="about-label" data-i18n="aboutVersion">Version</span>
          <span class="about-value" id="extensionVersion">1.0.0</span>
        </div>
        <div class="about-row">
          <span class="about-label" data-i18n="aboutMadeBy">Made by</span>
          <span class="about-value">
            <a href="https://zovo.dev" target="_blank" rel="noopener noreferrer" class="about-link">Zovo</a>
          </span>
        </div>
        <div class="about-row">
          <span class="about-label" data-i18n="aboutPrivacy">Privacy</span>
          <span class="about-value" data-i18n="aboutPrivacyValue">All data stays on your device</span>
        </div>
      </div>

      <div class="about-actions">
        <a href="https://chrome.google.com/webstore" target="_blank" rel="noopener noreferrer" class="btn btn-secondary">
          Rate Us
        </a>
        <a href="mailto:support@zovo.dev" class="btn btn-secondary">
          Support
        </a>
      </div>

      <!-- Debug Log (expandable) -->
      <details class="debug-log" id="debugLogSection">
        <summary class="debug-log__toggle">Debug Log</summary>
        <div class="debug-log__content">
          <p class="debug-log__empty" id="debugLogEmpty">No errors recorded.</p>
          <ul class="debug-log__list" id="debugLogList"></ul>
          <div class="debug-log__actions">
            <button type="button" class="btn btn-secondary btn--small" id="debugLogCopy">Copy Log</button>
            <button type="button" class="btn btn-secondary btn--small" id="debugLogClear">Clear Log</button>
          </div>
        </div>
      </details>
    </section>

    <!-- ===== Upgrade to Pro ===== -->
    <section class="card card--upgrade" aria-labelledby="upgrade-heading" id="upgradeProSection">
      <div class="upgrade-header">
        <h2 id="upgrade-heading">Upgrade to Pro</h2>
        <span class="coming-soon-badge">Coming Soon</span>
      </div>
      <p class="section-desc">Unlock the full power of Focus Mode with Pro features:</p>
      <ul class="upgrade-features" role="list">
        <li class="upgrade-features__item">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><polyline points="20 6 9 17 4 12"/></svg>
          <span><strong>Unlimited blocked sites</strong> (free: 10)</span>
        </li>
        <li class="upgrade-features__item">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><polyline points="20 6 9 17 4 12"/></svg>
          <span><strong>All pre-built blocklists</strong> including Entertainment, Gaming, Shopping</span>
        </li>
        <li class="upgrade-features__item">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><polyline points="20 6 9 17 4 12"/></svg>
          <span><strong>Extended Nuclear Mode</strong> up to 24 hours</span>
        </li>
        <li class="upgrade-features__item">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><polyline points="20 6 9 17 4 12"/></svg>
          <span><strong>Unlimited schedules</strong> for automated blocking</span>
        </li>
        <li class="upgrade-features__item">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><polyline points="20 6 9 17 4 12"/></svg>
          <span><strong>90-day focus history</strong> and weekly reports</span>
        </li>
        <li class="upgrade-features__item">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><polyline points="20 6 9 17 4 12"/></svg>
          <span><strong>Custom session durations</strong> with flexible timers</span>
        </li>
      </ul>
      <button type="button" class="btn btn-upgrade" id="upgradeProBtn" disabled>
        Coming Soon
      </button>
    </section>
  </main>

  <!-- Toast notification for upgrade messages -->
  <div id="optionsToast" class="options-toast" role="status" aria-live="polite" hidden>
    <span id="optionsToastMessage"></span>
  </div>

  <!-- Confirmation Dialog -->
  <dialog id="confirmDialog" class="confirm-dialog" aria-labelledby="confirmTitle" aria-describedby="confirmDesc">
    <div class="dialog-content">
      <h3 id="confirmTitle" data-i18n="dialogNuclearTitle">Activate Nuclear Mode?</h3>
      <p id="confirmDesc">
        This will lock your blocklist for <strong id="confirmDuration">30 minutes</strong>.
        You will <strong>not</strong> be able to turn it off early. Are you sure?
      </p>
      <div class="dialog-actions">
        <button type="button" class="btn btn-secondary" id="confirmCancel" data-i18n="dialogNuclearCancel">Cancel</button>
        <button type="button" class="btn btn-danger" id="confirmActivate" data-i18n="dialogNuclearActivate">Activate</button>
      </div>
    </div>
  </dialog>

  <script type="module" src="options.js"></script>
</body>
</html>
